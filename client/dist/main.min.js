angular.module("edify.allskills",[]).controller("AllSkillsController",["$scope","Skills",function(a,b){a.allSkills=[],a.getAllSkills=function(){b.getAllSkills().then(function(b){for(var c in b)a.allSkills.push([c,b[c]])})["catch"](function(a){console.error(a)})},a.getAllSkills()}]),angular.module("edify.user",["ui.router"]).controller("UserController",["$scope","$stateParams","Users",function(a,b,c){a.user=null,a.getUser=function(){c.getUser(b.username).then(function(b){a.user=b})["catch"](function(a){console.error(a)})},a.getUser()}]),angular.module("edify.main",[]).controller("MainController",["$scope","Auth","Users","Skills",function(a,b,c,d){a.user=null,a.getProfile=function(){b.isAuth()?a.user=b.user:b.getUser().then(function(b){a.user=b.data})},a.getProfile(),a.increaseLearnSkillLevel=function(b){console.log("learn skill level increased!"),a.user.learnSkills[b].skill_level+=1},a.decreaseLearnSkillLevel=function(b){console.log("learn skill level decreased!"),a.user.learnSkills[b].skill_level-=1},a.saveLearnSkill=function(b){var c={type:"learn",skill:a.user.learnSkills[b].skill_name,skillLevel:a.user.learnSkills[b].skill_level,userId:a.user.id};d.postSkill(c).then(function(a){console.log("learn skill level saved!")})},a.removeLearnSkill=function(b){var c=a.user.learnSkills[b].id;a.user.learnSkills.splice(b,1),d.deleteSkill(a.user.id,c,"learn").then(function(a){console.log(a)})},a.increaseTeachSkillLevel=function(b){a.user.teachSkills[b].skill_level+=1,console.log("teach skill increased!")},a.decreaseTeachSkillLevel=function(b){a.user.teachSkills[b].skill_level-=1,console.log("teach skill decreased!")},a.saveTeachSkill=function(b){var c={type:"teach",skill:a.user.teachSkills[b].skill_name,skillLevel:a.user.teachSkills[b].skill_level,userId:a.user.id};d.postSkill(c).then(function(a){console.log("teach skill level saved!")})},a.removeTeachSkill=function(b){var c=a.user.teachSkills[b].id;a.user.teachSkills.splice(b,1),d.deleteSkill(a.user.id,c,"teach").then(function(a){console.log(a)})}}]),angular.module("edify.skill",["ui.router"]).controller("SkillController",["$scope","$stateParams","Skills",function(a,b,c){a.skillname=b.skillname,a.getSkill=function(){c.getSkill(b.skillname).then(function(b){a.learners=b.learners,a.teachers=b.teachers})["catch"](function(a){console.error(a)})},a.getSkill()}]),angular.module("edify.services",[]).factory("Auth",["$http","$location","$window",function(a,b,c){var d=null,e=function(){return a({method:"GET",url:"/api/profile"})},f=function(){return!!d},g=function(){a({method:"GET",url:"/logout"}),d=null,b.path("/signin")};return{user:d,getUser:e,isAuth:f,signOut:g}}]).factory("Users",["$http",function(a){var b=function(b){return a({method:"GET",url:"/api/users/"+b}).then(function(a){return a.data})},c=function(b){return a({method:"POST",url:"/api/",data:b}).then(function(a){return a.data})};return{getUser:b,postUser:c}}]).factory("Skills",["$http",function(a){var b=function(){return a({method:"GET",url:"/api/skills/"}).then(function(a){return a.data})},c=function(b){return a({method:"GET",url:"/api/skills/"+b}).then(function(a){return a.data})},d=function(b){return a({method:"POST",url:"/api/skills/",data:b}).then(function(a){return a.data})},e=function(b,c,d){return a({method:"POST",url:"/api/skills/delete",data:{type:d,skillId:c,userId:b}}).then(function(a){return a.data})};return{getAllSkills:b,postSkill:d,deleteSkill:e,getSkill:c}}]),angular.module("edify",["ui.router","edify.services","edify.user","edify.allskills","edify.main","edify.skill"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"app/templates/main.html",controller:"MainController"}).state("signin",{url:"/signin",templateUrl:"app/templates/signin.html",controller:"AuthController"}).state("signout",{url:"/",controller:["Auth",function(a){a.signOut()}]}).state("user",{url:"/user/:username",templateUrl:"app/templates/user.html",controller:"UserController"}).state("allskills",{url:"/allskills",templateUrl:"app/templates/allskills.html",controller:"AllSkillsController"}).state("skill",{url:"/skill/:skillname",templateUrl:"app/templates/skill.html",controller:"SkillController"})}]);